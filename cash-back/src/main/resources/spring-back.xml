<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:p="http://www.springframework.org/schema/p"
	   xmlns:context="http://www.springframework.org/schema/context"
	   xmlns:mvc="http://www.springframework.org/schema/mvc"
	   xmlns:task="http://www.springframework.org/schema/task"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.1.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.1.xsd
        http://www.springframework.org/schema/task
    	http://www.springframework.org/schema/task/spring-task-3.2.xsd">

	<mvc:resources location="/resources/" mapping="/resources/**"></mvc:resources>
	<!--<mvc:resources location="/files/" mapping="/files/**"></mvc:resources>-->
	<mvc:view-controller path="/" view-name="/login" />
	<!--对模型视图名称的解析，即在模型视图名称添加前后缀 -->
	<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
		<property name="prefix" value="/WEB-INF/viewback/" />
		<property name="suffix" value=".jsp" />
		<property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
	</bean>
	<!--文件上传配置 -->
	<bean id="multipartResolver"
		  class="org.springframework.web.multipart.commons.CommonsMultipartResolver" p:defaultEncoding="utf-8">
		<property name="maxUploadSize">
			<value>104857600</value>
		</property>
		<property name="maxInMemorySize">
			<value>4096</value>
		</property>
	</bean>

	<mvc:interceptors>
		<mvc:interceptor>
			<mvc:mapping path="/**"/>
			<mvc:exclude-mapping path="/resources/**"/>
			<mvc:exclude-mapping path="/common/**"/>

			<mvc:exclude-mapping path="/"/>
			<mvc:exclude-mapping path="/loginPage"/>
			<mvc:exclude-mapping path="/login"/>
			<mvc:exclude-mapping path="/indexBack"/>
			<mvc:exclude-mapping path="/logout"/>
			<mvc:exclude-mapping path="/updateCache"/>
			<mvc:exclude-mapping path="/user/updateUserPassword"/>
			<mvc:exclude-mapping path="/removeImg"/>
			<mvc:exclude-mapping path="/indexManage/saveUpdateCv"/>
			<mvc:exclude-mapping path="/auditCenter/addAuditCenter"/>
			<mvc:exclude-mapping path="/collectionOrder/doDispatch"/>
			<mvc:exclude-mapping path="/collectionOrder/addcuishou"/>
			<mvc:exclude-mapping path="/collectionOrder/kokuan"/>
			<mvc:exclude-mapping path="/collectionOrder/sendMsg"/>
			<mvc:exclude-mapping path="/collectionOrder/withhold-callback"/>
			<mvc:exclude-mapping path="/sync/loan-order-info"/>
			<mvc:exclude-mapping path="/sync/loan-order-update"/>
			<mvc:exclude-mapping path="/sync/loan-order-update"/>
			<mvc:exclude-mapping path="/sync/repayment"/>
			<bean class="com.info.back.interceptor.AdminContextInterceptor"/>
		</mvc:interceptor>
	</mvc:interceptors>

	<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />
	<context:component-scan base-package="com.info.back.controller">
	</context:component-scan>
	<mvc:annotation-driven />
	<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
		<property name="messageConverters">
			<list>
				<bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
					<property name="supportedMediaTypes">
						<list>
							<value>text/html;charset=UTF-8</value>
							<value>text/plain;charset=UTF-8</value>
							<value>application/json;charset=UTF-8</value>
						</list>
					</property>
				</bean>
			</list>
		</property>
	</bean>

	<!--<task:scheduled-tasks scheduler="myScheduler">
		&lt;!&ndash;<task:scheduled ref="taskJobMiddleService" method="autoDispatch" cron="0 11 1,12,20 * * ?" />每天凌晨3、5、9、20点11分 跑分单，逾期计算&ndash;&gt;
		<task:scheduled ref="taskJobStatistics" method="callProcedure" cron="0 2 0,11,14,17,20,22 * * ?" />
		<task:scheduled ref="taskJobStatistics" method="callCountCollection" cron="0 1 0 * * ?" /> &lt;!&ndash; 催收记录统计 凌晨01分跑 &ndash;&gt;
		<task:scheduled ref="taskWithholdStatus" method="updateStatus" cron="0 25 10,14,21 * * ?" />
		<task:scheduled ref="dataSyncService" method="syncOverdueDate" cron="0 40 2 * * ?" />&lt;!&ndash;每天凌晨2点40跑逾期&ndash;&gt;
		&lt;!&ndash;3点开始跑逾期，到4点跑完了，先执行部分还款数据，5点开始跑全部还款数据(1-4之间不执行续期、还款、代扣，为了防止3点逾期还未推送，还款先推送了)&ndash;&gt;
		<task:scheduled ref="twoMinSyncOperateService" method="twoMinSyncOverdue" cron="0 0/2 4-23 * * ?" />&lt;!&ndash;4点到24点   每2分钟跑逾期(部分还款)&ndash;&gt;
		<task:scheduled ref="twoMinSyncOperateService" method="twoMinSyncOther" cron="0 0/2 5-23 * * ?" />&lt;!&ndash;5点到24点   每2分钟跑续期，还款，代扣 &ndash;&gt;
		<task:scheduled ref="twoMinSyncOperateService" method="twoMinSyncOther" cron="0 0/2 0 * * ?" />&lt;!&ndash;0点到1点   每2分钟跑续期，还款，代扣 &ndash;&gt;
		<task:scheduled ref="twoMinSyncOperateService" method="twoMinSyncOverdue" cron="0 0/6 0 * * ?" />&lt;!&ndash;4点到24点   每2分钟跑逾期(部分还款)&ndash;&gt;
		<task:scheduled ref="taskJianmianStatus" method="updateStatus" cron="0 30 23 * * ?" /> &lt;!&ndash; 每天晚上11点30 跑减免失效状态 &ndash;&gt;
		<task:scheduled ref="taskCleacUpOperationRecordData" method="cleacUpOperationRecordData" cron="0 30 23 * * ?" /> &lt;!&ndash; 清除操作记录数据 &ndash;&gt;
		<task:scheduled ref="taskDisableOrEnableCollections" method="disableCollections" cron="0 5 0 1 * ?" />
		<task:scheduled ref="taskDisableOrEnableCollections" method="enableCollections" cron="0 0 23 1 * ?" />
		&lt;!&ndash;<task:scheduled ref="dealOverdueLoanService" method="dealOverdueLoan" cron="0 10 0 * * ?" />&ndash;&gt;
		<task:scheduled ref="taskDealWithSpecialOrder" method="updateOrderInfo" cron="0 0 7 2 * ?" />   &lt;!&ndash; 应产品需求，修改每月1号完成订单至指定催收员(每月2号7点执行) &ndash;&gt;
		<task:scheduled ref="taskUpdateOrderInfo" method="updateOrderInfo" cron="0 0 3 * * ?" />
		<task:scheduled ref="taskDealwithOrderUpgrade" method="orderUpgrade" cron="0 5 0 * * ?" />
	</task:scheduled-tasks>
	&lt;!&ndash;最多 5个定时任务线程&ndash;&gt;
	<task:scheduler id="myScheduler" pool-size="6"/>-->

</beans>
